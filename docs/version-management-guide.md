# 项目管理工具版本管理指南

## 📋 功能概述

平台现在支持甘特图和关键路径分析的版本管理功能，可以查看历史版本并回溯到之前的项目计划状态。

## 🎯 主要功能

### 1. 版本信息显示
- **版本标识**：显示当前查看的版本号（v2.0, v1.0等）
- **更新时间**：显示版本的创建日期
- **版本描述**：显示该版本的改动说明
- **版本类型**：
  - 🟣 **最新版本**：当前项目使用的版本
  - ⚪ **历史版本**：之前保存的版本

### 2. 版本切换
- **查看历史版本**：点击"📋 查看历史版本"按钮打开版本选择器
- **选择版本**：在弹出的模态框中选择要查看的历史版本
- **返回最新版本**：查看历史版本时，会显示"↩️ 返回最新版本"按钮

### 3. 版本历史记录
每个版本包含以下信息：
- **版本号**：如 v2.0, v1.0
- **创建日期**：版本的创建时间
- **修改人**：创建该版本的人员
- **描述**：版本改动的详细说明
- **数据快照**：完整的甘特图任务数据

## 🚀 使用方法

### 查看最新版本（默认）
1. 打开平台，进入"📅 项目甘特图"或"🔍 关键路径分析"
2. 系统默认显示最新版本
3. 页面顶部显示版本信息，例如：
   ```
   最新版本 | v2.0 · 2025-11-02 · 基于11.2共学会议后的项目进度更新
   ```

### 查看历史版本
1. 点击页面右上角的"📋 查看历史版本"按钮
2. 在弹出的模态框中查看所有可用版本
3. 点击要查看的版本卡片
4. 系统会自动加载该版本的数据并更新显示

### 返回最新版本
1. 查看历史版本时，"↩️ 返回最新版本"按钮会自动显示
2. 点击该按钮即可快速返回到最新版本

## 📊 版本数据结构

版本数据存储在 `platform/data/gantt-versions.json` 文件中，结构如下：

```json
{
  "currentVersion": "v2.0",
  "currentVersionDate": "2025-11-02",
  "currentVersionDescription": "版本描述",
  "versions": [
    {
      "version": "v2.0",
      "date": "2025-11-02",
      "description": "基于11.2共学会议后的项目进度更新",
      "changedBy": "小姜+Linlu",
      "isLatest": true,
      "data": {
        "projectStartDate": "2024-10-28",
        "tasks": [...],
        "milestones": [...]
      }
    }
  ]
}
```

## 🔄 添加新版本

### 步骤1：备份当前版本
在添加新版本前，需要将当前版本标记为非最新版本：

1. 打开 `platform/data/gantt-versions.json`
2. 将所有版本的 `isLatest` 设为 `false`

### 步骤2：创建新版本
1. 复制最新的版本对象
2. 修改版本信息：
   - `version`: 递增版本号（如 v2.0 → v3.0）
   - `date`: 当前日期（YYYY-MM-DD格式）
   - `description`: 本次改动的详细说明
   - `changedBy`: 修改人姓名
   - `isLatest`: 设为 `true`
3. 更新 `data` 字段中的任务数据（根据实际改动）

### 步骤3：更新版本信息
1. 更新 `currentVersion` 为新版本号
2. 更新 `currentVersionDate` 为新日期
3. 更新 `currentVersionDescription` 为新描述

### 示例：添加 v3.0 版本

```json
{
  "currentVersion": "v3.0",
  "currentVersionDate": "2025-11-10",
  "currentVersionDescription": "基于11.10共学会议，调整了硬件组开发进度",
  "versions": [
    {
      "version": "v3.0",
      "date": "2025-11-10",
      "description": "基于11.10共学会议，调整了硬件组开发进度",
      "changedBy": "小姜",
      "isLatest": true,
      "data": {
        // 新的任务数据
      }
    },
    {
      "version": "v2.0",
      "date": "2025-11-02",
      "description": "基于11.2共学会议后的项目进度更新",
      "changedBy": "小姜+Linlu",
      "isLatest": false,  // 改为false
      "data": {
        // v2.0的任务数据保持不变
      }
    },
    // ... 其他历史版本
  ]
}
```

## 💡 最佳实践

### 何时创建新版本
建议在以下情况创建新版本：
1. **重大进度更新**：项目重要里程碑完成后
2. **计划调整**：任务时间线或依赖关系发生重大变化
3. **共学会议后**：根据会议讨论调整项目计划
4. **阶段转换**：从一个项目阶段进入下一个阶段

### 版本描述建议
版本描述应该清晰说明：
- **改动原因**：为什么做出这个改动
- **主要变化**：具体改变了哪些任务
- **依据**：基于什么会议、讨论或决策

示例：
- ✅ "基于11.2共学会议后的项目进度更新，调整了硬件组开发板选型后的任务时间线"
- ✅ "Week 3进度更新，硬件基础验证完成，调整后续集成阶段时间"
- ❌ "更新项目"
- ❌ "改了一些东西"

### 版本命名规范
- 使用语义化版本号：v1.0, v2.0, v3.0
- 重大改动递增主版本号（v1.0 → v2.0）
- 如果有多层改动，可以使用小版本号（v2.0 → v2.1）

## 🔍 版本对比

目前版本管理功能支持：
- ✅ 查看历史版本
- ✅ 对比不同版本的任务数据
- ⏳ 版本差异高亮（计划中）
- ⏳ 版本对比报告（计划中）

## ⚠️ 注意事项

1. **数据一致性**：确保版本数据中的任务ID与当前项目一致
2. **版本数量**：建议保留最近5-10个版本，避免文件过大
3. **备份数据**：在修改版本文件前，建议先备份
4. **JSON格式**：确保JSON格式正确，避免语法错误

## 📚 相关文档

- [甘特图使用指南](./gantt-chart-guide.md)
- [关键路径分析使用指南](./critical-path-guide.md)
- [项目管理工具箱分析与方案](../../docs/guidelines/项目管理工具箱分析与方案.md)

---

**最后更新**: 2025-11-02  
**维护者**: 平台开发团队
